# Netlify configuration for Top Tier Electrical website

[build]
  publish = "."
  command = "npm run build"

# Redirects for clean URLs and error handling
[[redirects]]
  from = "/home"
  to = "/"
  status = 301

[[redirects]]
  from = "/about"
  to = "/services.html"
  status = 301

[[redirects]]
  from = "/pricing"
  to = "/services.html"
  status = 301

# Custom 404 page
[[redirects]]
  from = "/*"
  to = "/404.html"
  status = 404

# Build plugins for performance
[[plugins]]
  package = "@netlify/plugin-lighthouse"

# Form handling configuration
[build.processing]
  skip_processing = false

[build.processing.html]
  pretty_urls = false

[build.processing.css]
  bundle = true
  minify = true

[build.processing.js]
  bundle = true
  minify = true

[build.processing.images]
  compress = true

# Environment context settings
[context.production]
  environment = { NODE_ENV = "production" }

[context.deploy-preview]
  environment = { NODE_ENV = "development" }

[context.branch-deploy]
  environment = { NODE_ENV = "development" }

# Netlify Dev settings
[dev]
  command = "npm run dev"
  port = 8888
  autoLaunch = false
